<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro de Expositor - Agropec 2025</title>

  <!-- Meta Tags Open Graph para preview em redes sociais (WhatsApp, Facebook, etc.) -->
  <meta property="og:title" content="Cadastro de Expositor - Agropec 2025">
  <meta property="og:description" content="Preencha o formul√°rio para cadastrar sua empresa na Agropec 2025 e fa√ßa parte do evento!">
  <meta property="og:image" content="https://i.postimg.cc/xqrqcZbt/logo-agropec.png">
  <meta property="og:url" content="https://gabriellopes23.github.io/CadastroAgropec/">
  <meta property="og:type" content="website">

  <!-- Importa√ß√£o da fonte Montserrat do Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* Cores da paleta Agropec */
    :root {
      --bg-dark-green: #1E4844;
      --input-bg-dark-green: #2E6E65;
      --border-dark-green: #1B3F3B;
      --button-green: #3AAFA9;
      --button-hover-green: #2c8b87;
      --button-light-green: #4ECDC4;
      --text-white: white;
      --placeholder-color: #666;
      --error-color: #ff6b6b;
      --error-bg: rgba(255, 107, 107, 0.1);
      --success-color: #51cf66;
      --success-bg: rgba(81, 207, 102, 0.1);
      --loading-color: #ffd43b;
      --loading-bg: #2e2a1a;
      --card-bg: rgba(255, 255, 255, 0.934);
      --card-text-color: #333;
      --input-line-color: #ccc;
      --input-focus-color: #3AAFA9;
      --button-secondary: #f8f9fa;
      --button-secondary-hover: #e9ecef;
      --button-danger: #dc3545;
      --button-danger-hover: #c82333;
      --shadow-light: rgba(0, 0, 0, 0.1);
      --shadow-medium: rgba(0, 0, 0, 0.15);
      --shadow-strong: rgba(0, 0, 0, 0.25);
      --file-button-bg: #f8f9fa;
      --file-button-border: #dee2e6;
      --file-button-hover: #e9ecef;
      --info-text-color: #6c757d;
      --required-color: #ff0000;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--bg-dark-green);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
    }

    .main-container {
      background-color: var(--card-bg);
      color: var(--card-text-color);
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 15px 40px var(--shadow-strong);
      min-width: 400px;
      max-width: 800px;
      width: 100%;
      box-sizing: border-box;
      position: relative;
      min-height: 600px;
    }

    /* Bot√£o de Ajuda */
    .help-button {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--button-green) 0%, var(--button-light-green) 100%);
      color: white;
      border: none;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(58, 175, 169, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
    }

    .help-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(58, 175, 169, 0.4);
      background: linear-gradient(135deg, var(--button-hover-green) 0%, var(--button-green) 100%);
    }

    .help-button:active {
      transform: translateY(0);
    }

    .form-content {
      transition: opacity 0.3s ease;
    }

    .form-content.hidden {
      opacity: 0;
      pointer-events: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    h1 {
      text-align: center;
      color: var(--card-text-color);
      font-size: 1.8rem;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .logo-container {
      text-align: center;
      margin-bottom: 20px;
    }

    .logo-container img {
      max-width: 280px;
      height: auto;
      display: inline-block;
      margin-bottom: 10px;
    }

    .logo-container::after {
      content: '';
      display: block;
      width: 60px;
      height: 2px;
      background-color: var(--button-green);
      margin: 10px auto 30px auto;
      border-radius: 2px;
    }

    label {
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 5px;
      display: block;
      color: var(--card-text-color);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Estilo para o asterisco de campo obrigat√≥rio */
    .required {
      color: var(--required-color);
      font-weight: bold;
      margin-left: 3px;
    }

    input[type="text"],
    input[type="date"],
    textarea {
      width: 100%;
      padding: 8px 0;
      border: none;
      border-bottom: 1px solid var(--input-line-color);
      background-color: transparent;
      color: var(--card-text-color);
      font-size: 1rem;
      margin-top: 0;
      margin-bottom: 20px;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }

    input[type="text"]:focus,
    input[type="date"]:focus,
    textarea:focus {
      outline: none;
      border-bottom-color: var(--input-focus-color);
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--placeholder-color);
    }

    select {
      width: 100%;
      padding: 8px 0;
      border: none;
      border-bottom: 1px solid var(--input-line-color);
      background-color: transparent;
      color: var(--card-text-color);
      font-size: 1rem;
      margin-top: 0;
      margin-bottom: 20px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20256%20256%22%3E%3Cpath%20fill%3D%22%23333%22%20d%3D%22M208.5%2096.5L128%20177l-80.5-80.5z%22%2F%3E%3C%2Fsvg%3E');
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 1em;
      padding-right: 2em;
      border-radius: 0;
      box-sizing: border-box;
    }

    select option {
      background-color: var(--card-bg);
      color: var(--card-text-color);
    }

    /* ESTILO CUSTOMIZADO PARA INPUT DE ARQUIVO */
    .file-input-container {
      position: relative;
      margin-bottom: 20px;
      width: 100%;
      box-sizing: border-box;
    }

    input[type="file"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
      overflow: hidden;
    }

    .file-input-button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px 16px;
      background: var(--file-button-bg);
      border: 2px solid var(--file-button-border);
      border-radius: 10px;
      color: var(--card-text-color);
      font-family: 'Montserrat', sans-serif;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      text-align: center;
      word-wrap: break-word;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    .file-input-button:hover {
      background: var(--file-button-hover);
      border-color: var(--button-green);
      transform: translateY(-1px);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    .file-input-button:active {
      transform: translateY(0);
    }

    .file-input-button::before {
      content: 'üìÅ';
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    .file-name {
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--button-green);
      font-weight: 500;
      font-style: italic;
      min-height: 20px;
      word-wrap: break-word;
      width: 100%;
      box-sizing: border-box;
    }

    .file-size-info {
      margin-top: 5px;
      font-size: 0.75rem;
      color: var(--info-text-color);
      font-weight: 400;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .file-size-info::before {
      content: '‚ÑπÔ∏è';
      font-size: 0.8rem;
    }

    .file-input-button.has-file {
      background: linear-gradient(135deg, rgba(58, 175, 169, 0.1) 0%, rgba(78, 205, 196, 0.1) 100%);
      border-color: var(--button-green);
      color: var(--button-green);
    }

    .file-input-button.has-file::before {
      content: '‚úì';
      color: var(--button-green);
    }

    .file-input-button.file-too-large {
      background: linear-gradient(135deg, rgba(255, 107, 107, 0.1) 0%, rgba(255, 107, 107, 0.2) 100%);
      border-color: var(--error-color);
      color: var(--error-color);
    }

    .file-input-button.file-too-large::before {
      content: '‚ö†Ô∏è';
      color: var(--error-color);
    }

    /* ESTILOS PARA BOT√ïES */
    button {
      border: none;
      cursor: pointer;
      font-family: 'Montserrat', sans-serif;
      font-weight: 500;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      outline: none;
      user-select: none;
      box-sizing: border-box;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--button-green) 0%, var(--button-light-green) 100%);
      color: var(--text-white);
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 15px rgba(58, 175, 169, 0.3);
      margin: 10px 0;
      width: 100%;
      max-width: 100%;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, var(--button-hover-green) 0%, var(--button-green) 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(58, 175, 169, 0.4);
    }

    .btn-primary:hover::before {
      left: 100%;
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 2px 10px rgba(58, 175, 169, 0.3);
    }

    .btn-primary::after {
      content: '+';
      font-size: 1.2rem;
      font-weight: 700;
      margin-left: 4px;
    }

    .btn-remove {
      background: var(--button-secondary);
      color: var(--button-danger);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 500;
      border: 1px solid rgba(220, 53, 69, 0.2);
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .btn-remove:hover {
      background: var(--button-danger);
      color: var(--text-white);
      border-color: var(--button-danger);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
    }

    .btn-remove:active {
      transform: translateY(0);
    }

    .btn-remove::before {
      content: '√ó';
      font-size: 1.1rem;
      font-weight: 700;
      margin-right: 4px;
    }

    /* BOT√ÉO ENVIAR DESTACADO EM VERDE */
    .btn-enviar {
      width: 100%;
      margin-top: 40px;
      padding: 22px 40px;
      font-size: 1.3rem;
      font-weight: 800;
      border-radius: 20px;
      background: linear-gradient(135deg, #00C851 0%, #3AAFA9 25%, #4ECDC4 50%, #3AAFA9 75%, #00C851 100%);
      background-size: 300% 300%;
      color: var(--text-white);
      letter-spacing: 1.5px;
      text-transform: uppercase;
      box-shadow: 0 12px 40px rgba(0, 200, 81, 0.6), 0 0 30px rgba(58, 175, 169, 0.4);
      position: relative;
      overflow: hidden;
      max-width: 100%;
      box-sizing: border-box;
      border: 3px solid transparent;
      background-clip: padding-box;
      animation: btnEnviarGlow 3s ease-in-out infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    @keyframes btnEnviarGlow {
      0%, 100% {
        background-position: 0% 50%;
        box-shadow: 0 12px 40px rgba(0, 200, 81, 0.6), 0 0 30px rgba(58, 175, 169, 0.4);
      }
      50% {
        background-position: 100% 50%;
        box-shadow: 0 15px 50px rgba(0, 200, 81, 0.8), 0 0 40px rgba(78, 205, 196, 0.6);
      }
    }

    .btn-enviar::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #00C851, #4ECDC4, #00C851, #4ECDC4);
      background-size: 400% 400%;
      border-radius: 22px;
      z-index: -1;
      animation: btnEnviarBorder 2s linear infinite;
    }

    @keyframes btnEnviarBorder {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .btn-enviar:hover {
      background: linear-gradient(135deg, #00A844 0%, #2c8b87 25%, #3AAFA9 50%, #2c8b87 75%, #00A844 100%);
      background-size: 300% 300%;
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 60px rgba(0, 200, 81, 0.8), 0 0 50px rgba(58, 175, 169, 0.7);
      animation: btnEnviarGlowHover 1.5s ease-in-out infinite;
    }

    @keyframes btnEnviarGlowHover {
      0%, 100% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
    }

    .btn-enviar:active {
      transform: translateY(-2px) scale(1.01);
      box-shadow: 0 10px 30px rgba(0, 200, 81, 0.7), 0 0 25px rgba(58, 175, 169, 0.5);
    }

    .btn-enviar::after {
      content: 'üöÄ';
      font-size: 1.5rem;
      margin-left: 12px;
      transition: all 0.3s ease;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .btn-enviar:hover::after {
      transform: translateX(6px) rotate(15deg);
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 25px 0;
      width: 100%;
      box-sizing: border-box;
    }

    .produto-item,
    .programacao-item {
      display: flex;
      align-items: flex-end;
      gap: 12px;
      margin-bottom: 15px;
      padding: 15px;
      background: rgba(58, 175, 169, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(58, 175, 169, 0.1);
      transition: all 0.3s ease;
      width: 100%;
      box-sizing: border-box;
    }

    .produto-item:hover,
    .programacao-item:hover {
      background: rgba(58, 175, 169, 0.08);
      border-color: rgba(58, 175, 169, 0.2);
      transform: translateY(-1px);
      box-shadow: 0 4px 15px var(--shadow-light);
    }

    .produto-item input,
    .programacao-item input {
      flex-grow: 1;
      margin-top: 0;
      margin-bottom: 0;
      background: transparent;
      border-bottom-color: rgba(58, 175, 169, 0.3);
      min-width: 0;
    }

    .produto-item button,
    .programacao-item button {
      flex-shrink: 0;
      margin-top: 0;
    }

    .produto-item .file-input-container {
      flex-grow: 1;
      margin-bottom: 0;
      min-width: 0;
      width: auto;
    }

    .produto-item .file-input-button {
      width: 100%;
      min-width: 0;
      max-width: 100%;
    }

    h3 {
      color: var(--card-text-color);
      margin-top: 35px;
      margin-bottom: 20px;
      font-size: 1.3rem;
      font-weight: 600;
      position: relative;
      padding-left: 15px;
    }

    h3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 20px;
      background: linear-gradient(135deg, var(--button-green), var(--button-light-green));
      border-radius: 2px;
    }

    .status {
      margin-top: 20px;
      font-weight: 500;
      text-align: center;
      padding: 15px;
      border-radius: 12px;
      border: 1px solid transparent;
      width: 100%;
      box-sizing: border-box;
    }

    .error {
      color: var(--error-color);
      background-color: var(--error-bg);
      border-color: var(--error-color);
    }

    .success {
      color: var(--success-color);
      background-color: var(--success-bg);
      border-color: var(--success-color);
    }

    .loading {
      color: var(--loading-color);
      background-color: var(--loading-bg);
      border-color: var(--loading-color);
    }

    /* OVERLAYS CORRIGIDOS - POSI√á√ÉO FIXA NA VIEWPORT */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(255, 255, 255, 0.98);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
      padding: 40px;
      box-sizing: border-box;
      backdrop-filter: blur(5px);
    }

    .overlay.show {
      opacity: 1;
      visibility: visible;
    }

    /* Help Overlay */
    .help-overlay {
      background: linear-gradient(135deg, rgba(248, 249, 250, 0.98) 0%, rgba(233, 236, 239, 0.98) 100%);
      justify-content: flex-start;
      align-items: center;
      overflow-y: auto;
      padding: 20px;
    }

    .help-overlay .overlay-content {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      max-width: 900px;
      width: 95%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .help-close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--info-text-color);
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .help-close-btn:hover {
      background: var(--button-secondary);
      color: var(--card-text-color);
    }

    .help-title {
      font-size: 1.8rem;
      color: var(--button-green);
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }

    .help-subtitle {
      font-size: 1.1rem;
      color: var(--info-text-color);
      margin-bottom: 30px;
      text-align: center;
      line-height: 1.5;
    }

    .help-section {
      margin-bottom: 30px;
      text-align: left;
    }

    .help-section h4 {
      font-size: 1.2rem;
      color: var(--card-text-color);
      font-weight: 600;
      margin-bottom: 15px;
      padding-left: 10px;
      border-left: 4px solid var(--button-green);
    }

    .help-field {
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(58, 175, 169, 0.05);
      border-radius: 10px;
      border-left: 4px solid var(--button-light-green);
    }

    .help-field-name {
      font-weight: 600;
      color: var(--button-green);
      font-size: 0.95rem;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .help-field-desc {
      color: var(--card-text-color);
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .help-images {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }

    .help-image-container {
      text-align: center;
    }

    .help-image-container img {
      width: 100%;
      max-width: 300px;
      height: auto;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }

    .help-image-container img:hover {
      transform: scale(1.05);
    }

    .help-image-caption {
      margin-top: 10px;
      font-size: 0.85rem;
      color: var(--info-text-color);
      font-weight: 500;
    }

    /* Loading Overlay */
    .loading-overlay {
      background: linear-gradient(135deg, rgba(248, 249, 250, 0.95) 0%, rgba(233, 236, 239, 0.95) 100%);
    }

    .loading-overlay .overlay-content {
      background: white;
      padding: 50px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      max-width: 500px;
      width: 90%;
    }

    .spinner {
      width: 80px;
      height: 80px;
      border: 6px solid #e9ecef;
      border-top: 6px solid var(--button-green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 30px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-size: 1.4rem;
      color: var(--card-text-color);
      font-weight: 600;
      margin-bottom: 10px;
    }

    .loading-subtext {
      font-size: 1rem;
      color: var(--info-text-color);
      font-weight: 400;
    }

    /* Success Overlay */
    .success-overlay {
      background: linear-gradient(135deg, rgba(212, 237, 218, 0.95) 0%, rgba(195, 230, 203, 0.95) 100%);
    }

    .success-overlay .overlay-content {
      background: white;
      padding: 50px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      max-width: 500px;
      width: 90%;
    }

    .success-icon {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--success-color);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
      animation: successPulse 0.6s ease-out;
    }

    .success-icon::before {
      content: '‚úì';
      font-size: 60px;
      color: white;
      font-weight: bold;
    }

    @keyframes successPulse {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .success-title {
      font-size: 2rem;
      color: var(--success-color);
      font-weight: 700;
      margin-bottom: 15px;
    }

    .success-message {
      font-size: 1.2rem;
      color: var(--card-text-color);
      margin-bottom: 30px;
      line-height: 1.5;
    }

    /* Error Overlay */
    .error-overlay {
      background: linear-gradient(135deg, rgba(248, 215, 218, 0.95) 0%, rgba(245, 198, 203, 0.95) 100%);
    }

    .error-overlay .overlay-content {
      background: white;
      padding: 50px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      max-width: 500px;
      width: 90%;
    }

    .error-icon {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--error-color);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
      animation: errorShake 0.6s ease-out;
    }

    .error-icon::before {
      content: '‚úï';
      font-size: 60px;
      color: white;
      font-weight: bold;
    }

    @keyframes errorShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .error-title {
      font-size: 2rem;
      color: var(--error-color);
      font-weight: 700;
      margin-bottom: 15px;
    }

    .error-message {
      font-size: 1.2rem;
      color: var(--card-text-color);
      margin-bottom: 30px;
      line-height: 1.5;
    }

    .overlay-button {
      background: var(--button-green);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .overlay-button:hover {
      background: var(--button-hover-green);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(58, 175, 169, 0.4);
    }

    /* Responsividade */
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }

      .main-container {
        padding: 20px;
        margin: 0;
        max-width: 100%;
        width: 100%;
      }

      .help-button {
        top: 15px;
        right: 15px;
        width: 35px;
        height: 35px;
        font-size: 1rem;
      }

      h1 {
        font-size: 1.5rem;
      }

      .logo-container img {
        max-width: 150px;
      }

      .produto-item,
      .programacao-item {
        flex-direction: column;
        align-items: stretch;
        gap: 15px;
        padding: 12px;
      }

      .produto-item .file-input-container,
      .programacao-item input {
        width: 100%;
        margin-bottom: 10px;
      }

      .btn-remove {
        align-self: center;
        width: auto;
        min-width: 100px;
      }

      .file-input-button {
        padding: 10px 12px;
        font-size: 0.85rem;
      }

      .btn-primary {
        padding: 14px 20px;
        font-size: 0.9rem;
      }

      .btn-enviar {
        padding: 18px 28px;
        font-size: 1.1rem;
      }

      .overlay {
        padding: 20px;
      }

      .success-title,
      .error-title {
        font-size: 1.5rem;
      }

      .success-message,
      .error-message {
        font-size: 1rem;
      }

      .help-images {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .help-title {
        font-size: 1.5rem;
      }

      .help-subtitle {
        font-size: 1rem;
      }

      * {
        max-width: 100%;
        word-wrap: break-word;
      }
    }

    @media (max-width: 400px) {
      .main-container {
        padding: 15px;
      }

      .file-input-button {
        padding: 8px 10px;
        font-size: 0.8rem;
        gap: 6px;
      }

      .btn-primary {
        padding: 12px 16px;
        font-size: 0.85rem;
      }

      .btn-enviar {
        padding: 16px 24px;
        font-size: 1rem;
      }
    }

    .produto-item,
    .programacao-item {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>
  <div class="main-container">
    <!-- Bot√£o de Ajuda -->
    <button class="help-button" onclick="showHelpModal()" title="Como preencher o formul√°rio">
      ?
    </button>

    <!-- Conte√∫do do formul√°rio -->
    <div class="form-content" id="formContent">
      <div class="logo-container">
        <img src="https://i.postimg.cc/D0r7ZyC5/LOGO-AGROPEC-VERDE2.png" alt="Logo Agropec">
      </div>

      <h1>Cadastro de Expositor</h1>

      <label for="empresaNome">Nome da Empresa:<span class="required">*</span></label>
      <input type="text" id="empresaNome" placeholder="Agro Cangaia">

      <label for="emailContato">Email para Contato:</label>
      <input type="text" id="emailContato" placeholder="contato@empresa.com">

      <label for="linkMaps">Link de Endere√ßo do Google Maps:</label>
      <input type="text" id="linkMaps" placeholder="https://maps.app.goo.gl/seu-endereco">

      <label for="empresaDesc">Descri√ß√£o:<span class="required">*</span></label>
      <textarea id="empresaDesc" rows="4" placeholder="Descri√ß√£o da empresa"></textarea>

      <label for="empresaTipo">Tipo:<span class="required">*</span></label>
      <select id="empresaTipo">
        <option value="">Selecione o Tipo</option>
        <option value="AGRICULTURA">AGRICULTURA</option>
        <option value="TECNOLOGIA">TECNOLOGIA</option>
        <option value="PECUARIA">PECUARIA</option>
        <option value="BELEZA">BELEZA</option>
        <option value="ALIMENTACAO">ALIMENTACAO</option>
        <option value="MAQUINAS">MAQUINAS</option>
        <option value="ARTESANATO">ARTESANATO</option>
        <option value="MINERACAO">MINERACAO</option>
      </select>

      <label for="logoInput">Logo:<span class="required">*</span></label>
      <div class="file-input-container">
        <input type="file" id="logoInput" accept="image/*">
        <label for="logoInput" class="file-input-button" id="logoButton">
          Escolher Logo
        </label>
        <div class="file-size-info">Tamanho m√°ximo: 1MB</div>
        <div class="file-name" id="logoFileName"></div>
        <img id="logoPreview" style="max-width: 250px; display: none;" />
      </div>

      <label for="bannerInput">Banner:<span class="required">*</span></label>
      <div class="file-input-container">
        <input type="file" id="bannerInput" accept="image/*">
        <label for="bannerInput" class="file-input-button" id="bannerButton">
          Escolher Banner
        </label>
        <div class="file-size-info">Tamanho m√°ximo: 1MB</div>
        <div class="file-name" id="bannerFileName"></div>
      </div>

      <h3>Produtos / Servi√ßos</h3>
      <div id="produtosContainer">
        <!-- Inputs ser√£o adicionados aqui ao clicar -->
      </div>
      <div class="action-buttons">
        <button type="button" onclick="adicionarProduto()" class="btn-primary">Adicionar Produto / Servi√ßo</button>
      </div>

      <h3>Programa√ß√µes</h3>
      <div id="programacoesContainer" class="programacoes-container">
        <!-- Programa√ß√µes din√¢micas ser√£o inseridas aqui -->
      </div>
      <div class="action-buttons">
        <button type="button" onclick="adicionarProgramacao()" class="btn-primary">Adicionar Programa√ß√£o</button>
      </div>

      <button type="button" onclick="enviar()" class="btn-enviar">Enviar Tudo</button>

      <div id="status" class="status"></div>
    </div>

    <!-- Help Overlay -->
    <div id="helpOverlay" class="overlay help-overlay">
      <div class="overlay-content">
        <button class="help-close-btn" onclick="hideHelpModal()">√ó</button>
        
        <div class="help-title">Como seu Expositor aparecer√° no App da Agropec</div>
        <div class="help-subtitle">Veja como cada campo do formul√°rio ser√° exibido no aplicativo e saiba o que preencher em cada um</div>
        
        <div class="help-images">
          <div class="help-image-container">
            <img src="https://i.postimg.cc/fRSs1rFc/Whats-App-Image-2025-07-06-at-10-39-14.jpg" alt="Exemplo do App - Tela Principal">
            <div class="help-image-caption">Tela principal do expositor no app</div>
          </div>
          <div class="help-image-container">
            <img src="https://i.postimg.cc/R0vPw3cW/Whats-App-Image-2025-07-06-at-10-39-26.jpg" alt="Exemplo do App - Tela Detalhada">
            <div class="help-image-caption">Tela detalhada com programa√ß√µes</div>
          </div>
        </div>

        <div class="help-section">
          <h4>üìù Guia de Preenchimento dos Campos</h4>
          
          <div class="help-field">
            <div class="help-field-name">Nome da Empresa</div>
            <div class="help-field-desc">O nome da sua empresa que aparecer√° como t√≠tulo principal no aplicativo. Exemplo: "FLORA" como mostrado na imagem.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Email para Contato</div>
            <div class="help-field-desc">Email que os visitantes poder√£o usar para entrar em contato com sua empresa atrav√©s do bot√£o "Contato" no app.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Link do Google Maps</div>
            <div class="help-field-desc">Link do endere√ßo da sua empresa no Google Maps. Os visitantes poder√£o acessar atrav√©s do bot√£o "Como chegar?" no app.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Descri√ß√£o (Sobre)</div>
            <div class="help-field-desc">Texto que aparece na se√ß√£o "Sobre" do seu expositor. Descreva sua empresa, seus diferenciais e principais atividades. Este texto aparece logo abaixo do tipo da empresa.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Tipo</div>
            <div class="help-field-desc">Categoria da sua empresa que aparece como uma etiqueta verde abaixo do nome. Exemplo: "Tecnologia" como mostrado na imagem.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Logo</div>
            <div class="help-field-desc">Logotipo da sua empresa que aparecer√° sobreposto no banner principal. Recomenda-se usar uma imagem com fundo transparente (PNG).</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Banner</div>
            <div class="help-field-desc">Imagem de fundo principal do seu expositor. Esta √© a primeira imagem que os visitantes ver√£o. Use uma imagem de alta qualidade que represente bem sua empresa.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Produtos / Servi√ßos</div>
            <div class="help-field-desc">Imagens dos seus principais produtos ou servi√ßos que aparecer√£o na se√ß√£o "Produtos e Servi√ßos". Cada imagem deve representar claramente um produto ou servi√ßo oferecido.</div>
          </div>

          <div class="help-field">
            <div class="help-field-name">Programa√ß√µes</div>
            <div class="help-field-desc">Lista de eventos, palestras, demonstra√ß√µes ou atividades que sua empresa realizar√° durante o evento. Agora inclui data, hor√°rio e t√≠tulo de cada atividade. Exemplo: "13/07/2025 - 9:00 - Abertura", "14/07/2025 - 14:00 - Demonstra√ß√£o tecnol√≥gica".</div>
          </div>
        </div>

        <div class="help-section">
          <h4>üí° Dicas Importantes</h4>
          <div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
            <p style="margin: 0; color: #856404; font-size: 0.9rem; line-height: 1.4;">
              <strong>Tamanho das Imagens:</strong> Todas as imagens devem ter no m√°ximo 1MB.<br>
              <strong>Qualidade:</strong> Use imagens de boa qualidade para uma melhor apresenta√ß√£o no app.<br>
              <strong>Campos Obrigat√≥rios:</strong> Nome da Empresa, Descri√ß√£o e Tipo s√£o obrigat√≥rios.<br>
              <strong>Programa√ß√µes:</strong> Agora voc√™ pode especificar data, hor√°rio e t√≠tulo para cada programa√ß√£o. Adicione quantas desejar para manter os visitantes informados sobre suas atividades.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="overlay loading-overlay">
      <div class="overlay-content">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Enviando dados para a Agropec...</div>
        <div class="loading-subtext" id="loadingSubtext">Por favor, aguarde...</div>
      </div>
    </div>

    <!-- Success Overlay -->
    <div id="successOverlay" class="overlay success-overlay">
      <div class="overlay-content">
        <div class="success-icon"></div>
        <div class="success-title">Cadastro Realizado!</div>
        <div class="success-message">Parab√©ns! Seu expositor foi cadastrado com sucesso na Agropec 2025.</div>
        <button class="overlay-button" onclick="resetForm()">Fazer Novo Cadastro</button>
      </div>
    </div>

    <!-- Error Overlay -->
    <div id="errorOverlay" class="overlay error-overlay">
      <div class="overlay-content">
        <div class="error-icon"></div>
        <div class="error-title" id="errorTitle">Erro no Cadastro!</div>
        <div class="error-message" id="errorMessage">Ocorreu um erro ao enviar seus dados. Por favor, tente novamente.</div>
        <button class="overlay-button" onclick="hideErrorAndReturnToForm()">Tentar Novamente</button>
      </div>
    </div>
  </div>

  <script>
    const BASE_URL = 'https://4n2wbzfpwjhw7boo2eak3caehy0hylmz.lambda-url.sa-east-1.on.aws';
    const uploadImageUrl = `${BASE_URL}?action=uploadImage`;
    const saveExhibitorUrl = `${BASE_URL}?action=saveExpositor`;

    let produtoCounter = 0;
    const MAX_FILE_SIZE = 1024 * 1024; // 1MB em bytes

    // Vari√°veis para armazenar dados do formul√°rio
    let formData = {};

    // Elementos do DOM
    const formContent = document.getElementById('formContent');
    const loadingOverlay = document.getElementById('loadingOverlay');
    const successOverlay = document.getElementById('successOverlay');
    const errorOverlay = document.getElementById('errorOverlay');
    const helpOverlay = document.getElementById('helpOverlay');

    // Fun√ß√£o para salvar dados do formul√°rio
    function saveFormData() {
      formData = {
        empresaNome: document.getElementById("empresaNome").value,
        emailContato: document.getElementById("emailContato").value,
        linkMaps: document.getElementById("linkMaps").value,
        empresaDesc: document.getElementById("empresaDesc").value,
        empresaTipo: document.getElementById("empresaTipo").value,
        // Salvar informa√ß√µes dos produtos
        produtos: [],
        programacoes: []
      };

      // Salvar produtos
      const produtoInputs = document.getElementsByClassName("produtoInput");
      for (let i = 0; i < produtoInputs.length; i++) {
        if (produtoInputs[i].files[0]) {
          formData.produtos.push({
            file: produtoInputs[i].files[0],
            fileName: produtoInputs[i].files[0].name
          });
        }
      }

      // Salvar programa√ß√µes
      const datas = document.getElementsByClassName("programacaoData");
      const horarios = document.getElementsByClassName("programacaoHorario");
      const titulos = document.getElementsByClassName("programacaoTitulo");
      
      for (let i = 0; i < datas.length; i++) {
        formData.programacoes.push({
          data: datas[i].value,
          horario: horarios[i].value,
          titulo: titulos[i].value
        });
      }

      // Salvar arquivos de logo e banner
      const logoFile = document.getElementById("logoInput").files[0];
      const bannerFile = document.getElementById("bannerInput").files[0];
      
      if (logoFile) {
        formData.logoFile = logoFile;
        formData.logoFileName = logoFile.name;
      }
      
      if (bannerFile) {
        formData.bannerFile = bannerFile;
        formData.bannerFileName = bannerFile.name;
      }
    }

    // Fun√ß√£o para restaurar dados do formul√°rio
    function restoreFormData() {
      if (!formData || Object.keys(formData).length === 0) return;

      document.getElementById("empresaNome").value = formData.empresaNome || "";
      document.getElementById("emailContato").value = formData.emailContato || "";
      document.getElementById("linkMaps").value = formData.linkMaps || "";
      document.getElementById("empresaDesc").value = formData.empresaDesc || "";
      document.getElementById("empresaTipo").value = formData.empresaTipo || "";

      // Restaurar programa√ß√µes
      if (formData.programacoes && formData.programacoes.length > 0) {
        const container = document.getElementById("programacoesContainer");
        container.innerHTML = "";
        
        formData.programacoes.forEach(prog => {
          const div = document.createElement("div");
          div.className = 'programacao-item';
          div.innerHTML = `
            <input type="text" placeholder="Data (ex: 13/07/2025)" class="programacaoData" value="${prog.data}" required>
            <input type="text" placeholder="Hor√°rio (ex: 9:00)" class="programacaoHorario" value="${prog.horario}" required>
            <input type="text" placeholder="T√≠tulo da Programa√ß√£o" class="programacaoTitulo" value="${prog.titulo}" required>
            <button type="button" onclick="this.parentElement.remove()" class="btn-remove">Remover</button>
          `;
          container.appendChild(div);
        });
      }

      // Nota: Os arquivos n√£o podem ser restaurados por quest√µes de seguran√ßa do navegador
      // Mas podemos mostrar uma mensagem informativa
      if (formData.logoFileName) {
        document.getElementById("logoFileName").textContent = `Arquivo anterior: ${formData.logoFileName} (ser√° necess√°rio selecionar novamente)`;
        document.getElementById("logoFileName").style.color = 'var(--info-text-color)';
      }
      
      if (formData.bannerFileName) {
        document.getElementById("bannerFileName").textContent = `Arquivo anterior: ${formData.bannerFileName} (ser√° necess√°rio selecionar novamente)`;
        document.getElementById("bannerFileName").style.color = 'var(--info-text-color)';
      }
    }

    // Fun√ß√£o para esconder erro e voltar ao formul√°rio
    function hideErrorAndReturnToForm() {
      hideAllOverlays();
      formContent.classList.remove('hidden');
      restoreFormData();
    }

    // Fun√ß√£o para mostrar modal de ajuda
    function showHelpModal() {
      helpOverlay.classList.add('show');
    }

    // Fun√ß√£o para esconder modal de ajuda
    function hideHelpModal() {
      helpOverlay.classList.remove('show');
    }

    // Fun√ß√£o para mostrar overlay
    function showOverlay(overlayType, message = '', subMessage = '') {
      // Esconder formul√°rio
      formContent.classList.add('hidden');
      
      // Esconder todos os overlays
      hideAllOverlays();
      
      // Mostrar o overlay espec√≠fico
      if (overlayType === 'loading') {
        if (message) document.getElementById('loadingText').textContent = message;
        if (subMessage) document.getElementById('loadingSubtext').textContent = subMessage;
        loadingOverlay.classList.add('show');
      } else if (overlayType === 'success') {
        successOverlay.classList.add('show');
      } else if (overlayType === 'error') {
        if (message) document.getElementById('errorTitle').textContent = message;
        if (subMessage) document.getElementById('errorMessage').textContent = subMessage;
        errorOverlay.classList.add('show');
      }
    }

    // Fun√ß√£o para esconder todos os overlays
    function hideAllOverlays() {
      loadingOverlay.classList.remove('show');
      successOverlay.classList.remove('show');
      errorOverlay.classList.remove('show');
      helpOverlay.classList.remove('show');
    }

    // Fun√ß√£o para resetar o formul√°rio
    function resetForm() {
      // Esconder overlays
      hideAllOverlays();
      
      // Mostrar formul√°rio
      formContent.classList.remove('hidden');
      
      // Limpar dados salvos
      formData = {};
      
      // Limpar campos
      document.getElementById("empresaNome").value = "";
      document.getElementById("emailContato").value = "";
      document.getElementById("linkMaps").value = "";
      document.getElementById("empresaDesc").value = "";
      document.getElementById("empresaTipo").value = "";
      
      // Limpar arquivos
      document.getElementById("logoInput").value = "";
      document.getElementById("bannerInput").value = "";
      document.getElementById("logoPreview").style.display = 'none';
      
      // Resetar bot√µes de arquivo
      updateFileButton(document.getElementById('logoInput'), document.getElementById('logoButton'), document.getElementById('logoFileName'));
      updateFileButton(document.getElementById('bannerInput'), document.getElementById('bannerButton'), document.getElementById('bannerFileName'));
      
      // Limpar produtos e programa√ß√µes
      document.getElementById("produtosContainer").innerHTML = "";
      document.getElementById("programacoesContainer").innerHTML = "";
      produtoCounter = 0;
      
      // Limpar status
      document.getElementById("status").innerHTML = "";
    }

    // Fun√ß√£o para validar tamanho do arquivo
    function validateFileSize(file) {
      return file.size <= MAX_FILE_SIZE;
    }

    // Fun√ß√£o para formatar tamanho do arquivo
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function showImagePreview(input, imgElementId) {
      const file = input.files[0];
      const imgElement = document.getElementById(imgElementId);
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          imgElement.src = e.target.result;
          imgElement.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        imgElement.src = '';
        imgElement.style.display = 'none';
      }
    }

    // Fun√ß√£o para atualizar o visual do bot√£o de arquivo
    function updateFileButton(input, button, fileName) {
      const file = input.files[0];
      if (file) {
        const isValidSize = validateFileSize(file);
        
        button.classList.remove('has-file', 'file-too-large');
        
        if (isValidSize) {
          button.classList.add('has-file');
          const displayName = file.name.length > 15 ? file.name.substring(0, 15) + '...' : file.name;
          button.textContent = displayName;
          fileName.textContent = `Arquivo selecionado: ${file.name} (${formatFileSize(file.size)})`;
          fileName.style.color = 'var(--button-green)';
        } else {
          button.classList.add('file-too-large');
          button.textContent = 'Arquivo muito grande!';
          fileName.textContent = `‚ùå Arquivo muito grande: ${file.name} (${formatFileSize(file.size)}). M√°ximo permitido: 1MB`;
          fileName.style.color = 'var(--error-color)';
          
          setTimeout(() => {
            input.value = '';
            button.classList.remove('file-too-large');
            button.textContent = button.getAttribute('data-original-text');
            fileName.textContent = '';
            fileName.style.color = 'var(--button-green)';
          }, 3000);
        }
      } else {
        button.classList.remove('has-file', 'file-too-large');
        button.textContent = button.getAttribute('data-original-text');
        fileName.textContent = '';
        fileName.style.color = 'var(--button-green)';
      }
    }

    // Event listeners para os inputs de arquivo
    document.getElementById('logoInput').addEventListener('change', function () {
      updateFileButton(this, document.getElementById('logoButton'), document.getElementById('logoFileName'));
      showImagePreview(this, 'logoPreview');
    });

    document.getElementById('bannerInput').addEventListener('change', function () {
      updateFileButton(this, document.getElementById('bannerButton'), document.getElementById('bannerFileName'));
    });

    // Salvar textos originais dos bot√µes
    document.getElementById('logoButton').setAttribute('data-original-text', 'Escolher Logo');
    document.getElementById('bannerButton').setAttribute('data-original-text', 'Escolher Banner');

    function adicionarProduto() {
      const container = document.getElementById("produtosContainer");
      const div = document.createElement("div");
      div.className = 'produto-item';
      produtoCounter++;
      
      const fileInputId = `produtoInput${produtoCounter}`;
      const buttonId = `produtoButton${produtoCounter}`;
      const fileNameId = `produtoFileName${produtoCounter}`;
      
      div.innerHTML = `
        <div class="file-input-container">
          <input type="file" accept="image/*" class="produtoInput" id="${fileInputId}">
          <label for="${fileInputId}" class="file-input-button" id="${buttonId}" data-original-text="Escolher Produto">
            Escolher Produto
          </label>
          <div class="file-size-info">Tamanho m√°ximo: 1MB</div>
          <div class="file-name" id="${fileNameId}"></div>
        </div>
        <button type="button" onclick="this.parentElement.remove()" class="btn-remove">Remover</button>
      `;
      container.appendChild(div);

      document.getElementById(fileInputId).addEventListener('change', function() {
        updateFileButton(this, document.getElementById(buttonId), document.getElementById(fileNameId));
      });
    }

    function adicionarProgramacao() {
      const container = document.getElementById("programacoesContainer");
      const div = document.createElement("div");
      div.className = 'programacao-item';
      div.innerHTML = `
        <input type="text" placeholder="Data (ex: 13/07/2025)" class="programacaoData" required>
        <input type="text" placeholder="Hor√°rio (ex: 9:00)" class="programacaoHorario" required>
        <input type="text" placeholder="T√≠tulo da Programa√ß√£o" class="programacaoTitulo" required>
        <button type="button" onclick="this.parentElement.remove()" class="btn-remove">Remover</button>
      `;
      container.appendChild(div);
    }

    function showStatus(message, type = 'loading') {
      const div = document.getElementById("status");
      div.className = `status ${type}`;
      div.innerText = message;
    }

    // Fun√ß√£o para validar todos os arquivos
    function validateAllFiles() {
      const logoFile = document.getElementById("logoInput").files[0];
      const bannerFile = document.getElementById("bannerInput").files[0];
      const produtoInputs = document.getElementsByClassName("produtoInput");

      if (logoFile && !validateFileSize(logoFile)) {
        return false;
      }

      if (bannerFile && !validateFileSize(bannerFile)) {
        return false;
      }

      for (let i = 0; i < produtoInputs.length; i++) {
        const file = produtoInputs[i].files[0];
        if (file && !validateFileSize(file)) {
          return false;
        }
      }

      return true;
    }

    async function enviarArquivoParaLambdaOriginal(file, fileNameWithFolder) {
      const url = uploadImageUrl;

      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': file.type,
          'filename': fileNameWithFolder
        },
        body: file
      });

      const text = await response.text();
      if (!response.ok) throw new Error(`Erro no upload de ${fileNameWithFolder}: ${text}`);

      try {
        return JSON.parse(text);
      } catch {
        return { message: text };
      }
    }

    async function enviarJsonParaLambdaOriginal(payload) {
      const url = saveExhibitorUrl;

      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const text = await response.text();
      if (!response.ok) throw new Error(`Erro no envio JSON: ${text}`);
      return JSON.parse(text);
    }

    // Fun√ß√£o principal de envio
    async function enviar() {
      try {
        const empresaNome = document.getElementById("empresaNome").value.trim();
        const empresaDesc = document.getElementById("empresaDesc").value.trim();
        const empresaTipo = document.getElementById("empresaTipo").value.trim();
        const emailContato = document.getElementById("emailContato").value.trim();
        const linkMaps = document.getElementById("linkMaps").value.trim();

        // Valida√ß√£o de campos obrigat√≥rios
        if (!empresaNome || !empresaDesc || !empresaTipo) {
          showOverlay('error', 'Campos Obrigat√≥rios!', 'Por favor, preencha todos os campos obrigat√≥rios: Nome da Empresa, Descri√ß√£o e Tipo.');
          return;
        }

        // Valida√ß√£o de arquivos obrigat√≥rios
        const logoFile = document.getElementById("logoInput").files[0];
        const bannerFile = document.getElementById("bannerInput").files[0];
        
        if (!logoFile || !bannerFile) {
          showOverlay('error', 'Arquivos Obrigat√≥rios!', 'Por favor, selecione os arquivos obrigat√≥rios: Logo e Banner.');
          return;
        }

        // Valida√ß√£o de tamanho dos arquivos
        if (!validateAllFiles()) {
          showOverlay('error', 'Arquivo Muito Grande!', 'Um ou mais arquivos excedem o tamanho m√°ximo permitido de 1MB.');
          return;
        }

        // Salvar dados do formul√°rio antes de enviar
        saveFormData();

        const empresaId = empresaNome.toLowerCase().replace(/\s/g, "");
        const uploadPromises = [];

        const empresaFolder = `Exhibitors/${empresaId}/`;

        // Mostrar loading
        showOverlay('loading', 'Enviando arquivos...', 'Fazendo upload das imagens para a Agropec');

        // Preparar uploads
        if (logoFile) uploadPromises.push(enviarArquivoParaLambdaOriginal(logoFile, `${empresaFolder}logo.png`));
        if (bannerFile) uploadPromises.push(enviarArquivoParaLambdaOriginal(bannerFile, `${empresaFolder}banner.png`));

        const produtoInputs = document.getElementsByClassName("produtoInput");
        for (let i = 0; i < produtoInputs.length; i++) {
          const file = produtoInputs[i].files[0];
          if (file) {
            const nomeArquivo = `product_${i + 1}.png`;
            uploadPromises.push(enviarArquivoParaLambdaOriginal(file, `${empresaFolder}${nomeArquivo}`));
          }
        }

        // Upload de imagens
        const imageUploadResults = await Promise.allSettled(uploadPromises);
        
        // Atualizar loading
        showOverlay('loading', 'Processando dados...', 'Enviando informa√ß√µes do expositor');

        // Preparar programa√ß√µes com data, hor√°rio e t√≠tulo
        const datas = document.getElementsByClassName("programacaoData");
        const horarios = document.getElementsByClassName("programacaoHorario");
        const titulos = document.getElementsByClassName("programacaoTitulo");
        const programacoes = [];

        for (let i = 0; i < datas.length; i++) {
          const data = datas[i].value.trim();
          const horario = horarios[i].value.trim();
          const titulo = titulos[i].value.trim();
          if (data && horario && titulo) {
            // Converter data do formato YYYY-MM-DD para DD/MM/YYYY
            programacoes.push({
              horario,
              titulo,
              data
            });
          }
        }

        // Preparar payload
        const content = {
          nome: empresaNome,
          id: empresaId,
          estande: {
            nome: empresaNome,
            description: empresaDesc,
            type: empresaTipo,
            banner: null,
            logo: null,
            bannerBase64: null,
            logoBase64: null,
            programacoes,
            servicos: []
          },
          emailContact: emailContato,
          locationLink: linkMaps
        };

                console.log("Conte√∫do JSON a ser enviado:", content);

        // Enviar dados
        const jsonResult = await enviarJsonParaLambdaOriginal(content);
        
        // Sucesso! Limpar dados salvos
        formData = {};
        showOverlay('success');

      } catch (err) {
        console.error("Erro geral no envio:", err);
        showOverlay('error', 'Erro Inesperado!', `Ocorreu um erro durante o envio: ${err.message}`);
      }
    }

    // Fechar modal de ajuda ao clicar fora dele
    helpOverlay.addEventListener('click', function(e) {
      if (e.target === helpOverlay) {
        hideHelpModal();
      }
    });

    // Fechar modal de ajuda com tecla ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && helpOverlay.classList.contains('show')) {
        hideHelpModal();
      }
    });
  </script>
</body>
</html>

